<!DOCTYPE html>
<html>
<head>
    <title>Backend Preview</title>
    <style>
        #terminal {
            font-family: monospace;
            background-color: #000;
            color: #fff;
            padding: 20px;
        }
        #input {
            margin-top: 20px;
        }
        #prompt {
            font-weight: bold;
        }
        #cmd {
            background: transparent;
            border: none;
            color: white;
            outline: none;
        }
        .blink-caret {
            animation: blink-caret 0.75s infinite;
        }
        @keyframes blink-caret {
            50% {
                border-color: transparent;
            }
        }
    </style>
</head>
<body>
    <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
    <div id="terminal">
        <div id="output"></div>
        <div id="input">
            <span id="prompt">root@cli:~$</span>
            <span id="typedCmd" class="blink-caret"></span>
        </div>

        <script>
            var commandIndex = 0;
            var currentCommand = "netstat dev.neveragain.app";

            function typeCommand() {
                var typedCmdElement = document.getElementById("typedCmd");
                if (commandIndex < currentCommand.length) {
                    typedCmdElement.innerHTML += currentCommand.charAt(commandIndex);
                    commandIndex++;
                    setTimeout(typeCommand, 100);
                } else {
                    // Display the typed command without caret
                    typedCmdElement.className = "";
                    // Execute the command after typing
                    runCommand();
                }
            }

            function runCommand() {
                // Display the command in the terminal
                document.getElementById("output").innerHTML += `<p>${currentCommand}</p>`;

                // Simulate command execution based on user input
                fetch('/Users/bilal.mustafa/mab/personal/flaskapp/flask-app-play/test1.txt')
                    .then(response => response.text())
                    .then(output => {
                        // Split the output into lines
                        const lines = output.split('\n');
                        
                        // Display each line as command output
                        lines.forEach(line => {
                            const commandOutput = `<p>${line}</p>`;
                            displayOutput(commandOutput);
                        });
                    })
                    .catch(error => {
                        displayOutput(`Error retrieving command output: ${error}`);
                    });
            }

            function displayOutput(output) {
                // Display the command output in the terminal
                document.getElementById("output").innerHTML += output;
            }

            // Preload the terminal with netstat command
            window.onload = function() {
                typeCommand();
            }
        </script>
    </div>
</body>
</html>